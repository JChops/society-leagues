<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Society Leagues</title>
    <link rel="stylesheet" href="/resources/public/css/society.css">
    <link rel="stylesheet" href="/resources/bower_components/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="/resources/css/jquery.datetimepicker.css">
</head>

<body id="leagueApp" ng-controller="HomeCtrl">

<div class="please-wait-dialog" ng-hide="vm.appReady">
    <img class="please-wait-spinner" src="/resources/img/loading.gif">
</div>

<header ng-class="{'app-ready': vm.appReady}">
    <div >

        <a href="#">
            <img class="logo" src="/resources/img/logo.png">
        </a>
        <span>League</span>
    </div>

    <div>
        <div>
            <div class="username-placeholder" ng-hide="vm.userName"></div>
            <span ng-cloak>{{vm.userName}}</span>
        </div>
        <div class="header-element">
            <a class="logout" href="#" ng-click="logout()">Logout</a>
        </div>
    </div>
</header>

<main class="container not-ready" ng-class="{'app-ready': vm.appReady}" ng-cloak>
    <tt-error-messages></tt-error-messages>
    <div class="info-messages"
         ng-style="{'opacity': vm.infoMessages.length > 0 ? 1 : 0, 'z-index': vm.infoMessages.length > 0 ? 10 : -10}">
        <img class="info-icon" src="/resources/img/info-icon.png">

        <div class="messages-group">
            <div ng-repeat="info in vm.infoMessages">{{info.description}}</div>
        </div>
    </div>


    <div id ="leader">
        <table>
            <thead>
            <tr>
                <th>Name</th>
                <th>Matches</th>
                <th>Wins</th>
                <th>Loses</th>
                <th>Racks</th>
                <th>Percentage</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="player in vm.leaderboard" ng-class="{'table-odd': $index % 2 == 1, 'table-even': $index % 2 == 0}">
                <td>{{player.name}}</td>
                <td>{{player.matches}}</td>
                <td>{{player.wins}}</td>
                <td>{{player.loses}}</td>
                <td>{{player.racks}}</td>
                <td>{{player.percentage}}</td>
            </tr>
            </tbody>
        </table>
    </div>

    <div id="user-stats">
        Matches <span ng-bind="vm.stats.matches"></span>
        Wins <span ng-bind="vm.stats.wins"></span>
        Loses <span ng-bind="vm.stats.loses"></span>
        Racks <span ng-bind="vm.stats.racks"></span>
        Percentage <span ng-bind="vm.stats.percentage"></span>
    </div>

     <div id="match-history">
        <table>
            <thead>
            <tr>
                <th>Challenger</th>
                <th>Opponent</th>
                <th>Win</th>
                <th>Winner Racks</th>
                <th>loser Racks</th>
                <th>MatchDate</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="match in vm.matches" ng-class="{'table-odd': $index % 2 == 1, 'table-even': $index % 2 == 0}">
                <td>{{match.home.name}}</td>
                <td>{{match.away.name}}</td>
                <td>{{match.win}}</td>
                <td>{{match.winnerRacks}}</td>
                <td>{{match.loserRacks}}</td>
                <td>{{match.matchDate}}</td>
            </tr>
            </tbody>
        </table>

        <ul>
            <li>
                <a ng-enabled="vm.totalPages > 0" ng-click="previous()"
                   ng-disabled="vm.currentPage == 1">&#171;</a>
            </li>
            <li ng-repeat="page in pages()">
                <!--<a ng-enabled="vm.totalPages > 0" ng-click="goToPage($index + 1)" ng-class="{'pure-button-active': page == vm.currentPage}">{{page}}</a></li>-->
                <a ng-enabled="vm.totalPages > 0" ng-click="goToPage($index + 1)">{{page}}</a>
            </li>
            <li>
                <a ng-enabled="vm.totalPages > 0" ng-disabled="vm.currentPage == vm.totalPages" ng-click="next()">&#187;</a>
            </li>
        </ul>
    </div>

    <div id="pending">
         <table>
            <thead>
            <tr>
                <th>Challenger</th>
                <th>Opponent</th>
                <th>MatchDate</th>
                <th>Type</th>
            </tr>
            </thead>
             <tbody>
             <tr ng-repeat="c in vm.pendingChallenges" ng-class="{'table-odd': $index % 2 == 1, 'table-even': $index % 2 == 0}">
                <td>{{c.teamMatch.home.name}}</td>
                <td>{{c.teamMatch.away.name}}</td>
                <td>{{c.challengeDate}}</td>
                <td>{{c.teamMatch.division.type}}</td>
            </tr>
            </tbody>
         </table>
    </div>

      <div id="accepted">
         <table>
            <thead>
            <tr>
                <th>Challenger</th>
                <th>Opponent</th>
                <th>MatchDate</th>
                <th>Type</th>
            </tr>
            </thead>
             <tbody>
            <tr ng-repeat="c in vm.acceptedChallenges" ng-class="{'table-odd': $index % 2 == 1, 'table-even': $index % 2 == 0}">
                <td>{{c.teamMatch.home.name}}</td>
                <td>{{c.teamMatch.away.name}}</td>
                <td>{{c.challengeDate}}</td>
                <td>{{c.teamMatch.division.type}}</td>
            </tr>
            </tbody>
         </table>
    </div>
</main>

<script type="text/javascript"
        data-main="/resources/js/run-home-app"
        src="/resources/bower_components/requirejs/require.js">
</script>
</body>

</html>